<div>
  <div>
    <div class="flex flex-col">
      <h3 class="text-xl font-medium text-center mb-4">Publique um comentário sobre esta árvore!</h3>
      
      {% if request.user.is_authenticated %}
        <div class="mb-3 p-3 bg-blue-50 border border-blue-200 rounded-lg">
          <p class="text-sm text-gray-700">
            Comentando como: <strong class="text-blue-700">{{ request.user.username }}</strong>
            {% if request.user.is_tecnico or request.user.is_gestor %}
              <span class="ml-2 text-xs bg-green-100 text-green-800 px-2 py-1 rounded">✓ Especialista</span>
            {% endif %}
          </p>
        </div>
        
        <textarea unicorn:model="content" placeholder="Escreva seu comentário aqui..." class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-emerald-500 focus:border-emerald-500 h-20 my-2"></textarea>
        
        <button unicorn:click="submit" class="bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-2 px-4 rounded-lg transition-colors">
          Enviar Comentário
        </button>
        
        {% if error %}
          <div class="mt-2 p-3 bg-red-50 border-l-4 border-red-500">
            <p class="text-sm text-red-700">{{ error }}</p>
          </div>
        {% endif %}
      {% else %}
        <div class="p-4 bg-yellow-50 border border-yellow-200 rounded-lg text-center">
          <p class="text-gray-700 mb-3">Você precisa estar logado para comentar</p>
          <a href="{% url 'login' %}" class="inline-block bg-emerald-600 text-white px-6 py-2 rounded-lg hover:bg-emerald-700 font-medium">
            Fazer Login
          </a>
        </div>
      {% endif %}
    </div>
  </div>
  
  <div class="my-8">
    <h3 class="text-lg font-semibold mb-4">Comentários ({{ posts|length }})</h3>
    <div class="flex flex-col gap-3">
      {% for post in posts %}
      <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
        <div class="flex justify-between items-start mb-2">
          <div class="flex items-center gap-2">
            <h2 class="font-bold text-gray-900">{{ post.author }}</h2>
            {% if post.specialized %}
              <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded font-medium">✓ Especialista</span>
            {% endif %}
          </div>
          <span class="text-sm text-gray-500">{{ post.created_on|date:"d/m/Y H:i"}}</span>
        </div>
        <p class="text-gray-700">{{ post.content }}</p>
      </div>
      {% empty %}
      <div class="text-center py-8 text-gray-500">
        <p>Nenhum comentário ainda. Seja o primeiro a comentar!</p>
      </div>
      {% endfor %}
    </div>
  </div>
</div>
